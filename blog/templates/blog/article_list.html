{% load static %}


{% for the_article in articles %}

<div>
	<a href="{% url 'blog:the_article'
      		country_slug=the_article.country_slug
            region_slug=the_article.region_slug
            slug=the_article.slug %}">
		<div class="geometry_card tl_radius relative m-3">
			<img class="img_bg_card" src="{{the_article.img_prev.url}}">

			<div class="d-flex flex-row">
				<div class="">
					<div class="br_radius absolute indigo_bg white">
						<center><p class='pt-3 ps-3 small'>{{ the_article.category }}</p></center>
					</div>
					<div class="anti_circle absolute black_bg white">
						<h5 class='p-4'>{{ the_article.country }}</h5>
						<p class='px-4 pt-3 smaller'>{{ the_article.place_name }}</p>
					</div>
					<div class="circle absolute"></div>
				</div>
			</div>
		</div>
	</a>

	<div class="prev_text px-4">
		<h5 class="black pb-2">{{ the_article.title }}</h5>
		<a href="{% url 'blog:the_article'
		country=the_article.country|slugify
	    region=the_article.region|slugify
	    slug=the_article.slug %}"><button class="seagreen black_bg ">Читать</button></a>
	</div>	
</div>

{% empty %}

<h2>У статей выходной. Сами думайте, куда ехать ;)</h2>

{% endfor %}


<script>
  const container = document.getElementById('article-container');
  document.getElementById('category-buttons').addEventListener('click', e => {
    if (e.target.tagName !== 'BUTTON') return;
    document.querySelectorAll('#category-buttons button')
            .forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');

    fetch(`/blog/category/${e.target.dataset.slug}/`)
      .then(r => r.json())
      .then(data => container.innerHTML = data.html);
  });
</script>